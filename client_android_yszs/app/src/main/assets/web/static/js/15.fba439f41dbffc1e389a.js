webpackJsonp([15],{"0NNd":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("lC5x"),i=s.n(a),c=s("J0Oq"),n=s.n(c),o=s("4YfN"),r=s.n(o),h=s("ViAG"),l=s("9ER+"),u=s("ROgV"),m=s("gyMJ"),d=s("Si0C"),v=s("fUgm"),f=s("fctu"),p=s("cNKM"),_={components:{Calendar:h.a,SearchItem:u.a,HotSearch:d.a,SearchView:p.a,PopupContainer:f.a},computed:r()({checkInTimeStamp:function(){return+new Date(this.checkInDate)/1e3},checkOutTimeStamp:function(){return+new Date(this.checkOutDate)/1e3}},Object(v.b)(["checkInDate","checkOutDate"])),data:function(){return{showCalendar:!1,hotList:[],showSearchView:!1,searchValue:""}},watch:{searchValue:function(t){this.$store.commit("SET_HOMESTAY_KEYWORDS",t)}},mounted:function(){this.getHotHomestayList()},methods:{checkIn:function(){this.showCalendar=!0},checkOut:function(){this.showCalendar=!0},choosed:function(t,e){this.$store.commit("SET_CHECK_IN_DATE",Object(l.f)(t)),this.$store.commit("SET_CHECK_OUT_DATE",Object(l.f)(e))},toDetail:function(t){this.$router.push({path:"/homestay/detail/"+t.id})},getHotHomestayList:function(){var t=this;return n()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.t)({pageSize:8});case 2:s=e.sent,t.hotList=s.data;case 4:case"end":return e.stop()}},e,t)}))()},toList:function(t){this.checkInDate&&this.checkOutDate?("string"==typeof t?this.$store.commit("SET_HOMESTAY_KEYWORDS",t):this.searchValue||this.$store.commit("SET_HOMESTAY_KEYWORDS",""),this.$router.push({path:"homestay/list"})):this.$toast("请选择入住日期")},onSearch:function(){this.showSearchView=!0},commitSearch:function(t){this.showSearchView=!1,this.searchValue=t}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main-page",{staticClass:"homestay-index",attrs:{title:"民宿预订",back:"",headerClass:"gradient-style"}},[s("template",{slot:"scroll"},[s("l-header-image",{attrs:{type:"homestay"}}),t._v(" "),s("div",{staticClass:"block-section"},[s("div",{staticClass:"homestyle-date-choose-wrapper",on:{click:function(){return t.showCalendar=!0}}},[s("div",{staticClass:"checkin"},[s("span",{staticClass:"title"},[t._v("入住日期")]),t._v(" "),t.checkInDate?s("span",{staticClass:"date"},[t._v(t._s(t._f("dateFormat")(t.checkInDate)))]):s("span",{staticClass:"date"},[t._v("--月 --日")])]),t._v(" "),s("div",{staticClass:"checkout"},[s("span",{staticClass:"title"},[t._v("离店日期")]),t._v(" "),t.checkOutDate?s("span",{staticClass:"date"},[t._v(t._s(t._f("dateFormat")(t.checkOutDate)))]):s("span",{staticClass:"date"},[t._v("--月 --日")])])]),t._v(" "),s("l-input",{staticClass:"homestay-keywords-input",attrs:{clearable:"",readonly:"",placeholder:"关键字 / 位置 / 民宿名"},nativeOn:{click:function(e){return t.onSearch(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),s("div",{staticClass:"commit-btn",on:{click:t.toList}},[t._v("查找民宿")]),t._v(" "),s("hot-search",{on:{onItem:t.toList}})],1),t._v(" "),s("div",{staticClass:"block-section"},[s("div",{staticClass:"section-title"},[s("span",{staticClass:"iconfont icon-hot"}),t._v(" "),s("span",{staticClass:"text"},[t._v("热门房源")])]),t._v(" "),s("div",{staticClass:"hot-list-wrapper"},t._l(t.hotList,function(e,a){return s("div",{key:a,staticClass:"hot-list-item",on:{click:function(s){return t.toDetail(e)}}},[s("div",{staticClass:"image-wrapper"},[s("img",{attrs:{src:e.image}})]),t._v(" "),s("div",{staticClass:"item-content-wrapper"},[s("div",{staticClass:"title"},[t._v("\n              "+t._s(e.name)+"\n            ")])])])}),0)])],1),t._v(" "),s("calendar",{attrs:{show:t.showCalendar,checkInTimeStamp:t.checkInTimeStamp,checkOutTimeStamp:t.checkOutTimeStamp},on:{"update:show":function(e){t.showCalendar=e},choosed:t.choosed}}),t._v(" "),s("popup-container",{attrs:{show:t.showSearchView,position:"right",appendToBody:""},on:{"update:show":function(e){t.showSearchView=e}}},[s("search-view",{on:{hidden:function(e){t.showSearchView=!1},commit:t.commitSearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],2)},staticRenderFns:[]};var y=s("C7Lr")(_,S,!1,function(t){s("cUm/")},null,null);e.default=y.exports},"68M/":function(t,e){},Si0C:function(t,e,s){"use strict";var a=s("lC5x"),i=s.n(a),c=s("J0Oq"),n=s.n(c),o=s("gyMJ"),r={data:function(){return{hotSearchValues:[]}},mounted:function(){this.getHomestayHotSearchList()},methods:{onHotSearchValue:function(t){this.$emit("onItem",t)},getHomestayHotSearchList:function(){var t=this;return n()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.p)();case 2:t.hotSearchValues=e.sent;case 3:case"end":return e.stop()}},e,t)}))()}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homestay-hot-search-list"},t._l(t.hotSearchValues,function(e,a){return s("div",{key:a,staticClass:"homestay-hot-search-item",on:{click:function(s){return t.onHotSearchValue(e)}}},[t._v("\n    "+t._s(e)+"\n  ")])}),0)},staticRenderFns:[]};var l=s("C7Lr")(r,h,!1,function(t){s("Wocc")},null,null);e.a=l.exports},Wocc:function(t,e){},cNKM:function(t,e,s){"use strict";var a=s("ROgV"),i=s("Si0C"),c=s("nUeE"),n=s.n(c),o={components:{SearchHeader:a.a,HotSearch:i.a},props:{value:String},data:function(){return{searchKeywords:this.value,historyList:[]}},watch:{searchKeywords:function(t){this.$emit("input",t)},value:function(t){this.searchKeywords=t}},created:function(){this.getHistorySearch()},methods:{onSearch:function(t){var e=this;this.searchKeywords=t,this.$nextTick(function(){e.commitSearch(t)})},commitSearch:function(t){this.saveHistorySearch(t),this.getHistorySearch(),this.$emit("commit",t)},saveHistorySearch:function(t){if(t){var e=null,s=0;this.historyList.forEach(function(a,i){a===t&&(e=a,s=i)}),e?(this.historyList.splice(s,1),this.historyList.unshift(e)):this.historyList.unshift(t),this.historyList.length>10&&this.historyList.pop(),n.a.set("ZYB_HOMESTAY_HISTORY_SEARCH",this.historyList)}},getHistorySearch:function(){this.historyList=n.a.get("ZYB_HOMESTAY_HISTORY_SEARCH")||[]},clearHistory:function(){this.historyList=[],n.a.remove("ZYB_HOMESTAY_HISTORY_SEARCH")}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homestay-search-view"},[s("main-page",{attrs:{noHeader:""}},[s("search-header",{attrs:{placeholder:"关键字 / 位置 / 民宿名",searchBtnText:"查找"},on:{back:function(e){return t.$emit("hidden")},commit:t.commitSearch},model:{value:t.searchKeywords,callback:function(e){t.searchKeywords=e},expression:"searchKeywords"}}),t._v(" "),s("template",{slot:"scroll"},[s("div",{staticClass:"hot-search-wrapper block-section"},[s("div",{staticClass:"title"},[t._v("热门搜索")]),t._v(" "),s("hot-search",{on:{onItem:t.onSearch}})],1),t._v(" "),s("div",{staticClass:"block-section history-search-wrapper"},[s("div",{staticClass:"title"},[t._v("\n          历史搜索\n          "),t.historyList.length>0?s("div",{staticClass:"clear-search",on:{click:t.clearHistory}},[t._v("\n            清除搜索\n          ")]):t._e()]),t._v(" "),t.historyList.length>0?s("div",{staticClass:"history-search-list"},t._l(t.historyList,function(e,a){return s("div",{key:a,staticClass:"history-search-item",on:{click:function(s){return t.onSearch(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])}),0):s("div",{staticClass:"hisotry-search-empty"},[t._v("\n          -- 暂无搜索历史 --\n        ")])])])],2)],1)},staticRenderFns:[]};var h=s("C7Lr")(o,r,!1,function(t){s("68M/")},null,null);e.a=h.exports},"cUm/":function(t,e){}});