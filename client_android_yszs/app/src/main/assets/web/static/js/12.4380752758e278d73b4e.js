webpackJsonp([12],{"0k87":function(t,e,i){i("SSy3"),t.exports=i("ZuHZ").Object.keys},K7DZ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("lC5x"),s=i.n(n),r=i("J0Oq"),a=i.n(r),o=i("4YfN"),c=i.n(o),l=i("mjbv"),u=i("wE9i"),p=i("fctu"),h=i("HzJ8"),f=i.n(h),d=i("ZLEe"),m=i.n(d),v=i("gyMJ"),y=i("ROgV"),S={props:{listKeys:Array,list:Object,isDept:{type:Number,default:1}},methods:{picked:function(t){this.$emit("picked",t)}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"listWrapper",staticClass:"ship-station-area-list-item-wrapper"},t._l(t.listKeys,function(e,n){return i("div",{key:n,staticClass:"ship-station-area-list-item"},[i("div",{staticClass:"area"},[t.isDept?i("div",[i("span",{staticClass:"area-text"},[t._v(t._s(e))]),t._v(" 出发")]):i("div",[t._v("前往 "),i("span",{staticClass:"area-text"},[t._v(t._s(e))])])]),t._v(" "),i("div",{staticClass:"ship-station-area-list-child"},t._l(t.list[e].shipStation,function(e,n){return i("div",{key:n,staticClass:"child-item",on:{click:function(i){return t.picked(e)}}},[37===e.toStation.id?i("span",{staticClass:"child-item-label"},[t._v("\n          "+t._s(e.fromStation.cname)+" < -- > "+t._s(e.toStation.cname)+"\n        ")]):i("span",{staticClass:"child-item-label"},[t._v("\n          "+t._s(e.fromStation.cname)+" --\x3e "+t._s(e.toStation.cname)+"\n        ")])])}),0)])}),0)},staticRenderFns:[]};var b=i("C7Lr")(S,k,!1,function(t){i("Mlnl")},null,null).exports,g={components:{SearchHeader:y.a,ShipStationPickerList:b},props:{isDept:{type:Number,default:1}},computed:{area:function(){return this.$route.params.area},queryResultsKeys:function(){return m()(this.queryResults||{})||[]},cityName:function(){return"nb"===this.area?"宁波":""}},data:function(){return{list:{},offsetTopObj:{},offsetTopFirst:0,checked:"",searchValue:"",queryResults:{},listKeys:[]}},watch:{searchValue:function(t){t&&this.querySearch(t)}},mounted:function(){this.list=this.$store.getters.shipStationList[this.area][this.isDept],this.list&&0!==this.list.length?this.calculateHeight():this.getShipStation()},methods:{calculateHeight:function(){var t=this;this.getListKeys(),this.$nextTick(function(){var e=t.$refs.pickerList.$el.children,i=[],n=!0,s=!1,r=void 0;try{for(var a,o=f()(e);!(n=(a=o.next()).done);n=!0){var c=a.value;i.push(c.offsetTop)}}catch(t){s=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}i.length>0&&(t.offsetTopFirst=i[0]),t.listKeys.forEach(function(e,n){t.offsetTopObj[e]=i[n]}),t.listKeys.length>0&&(t.checked=t.listKeys[0])})},getShipStation:function(){var t=this;return a()(s.a.mark(function e(){var i,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={isDept:t.isDept,cityName:t.cityName},e.next=3,Object(v.R)(i);case 3:n=e.sent,t.list={},n.forEach(function(e,i){t.$set(t.list,e.areaName,e)}),t.$store.commit("STORE_SHIP_STATION_LIST",{type:t.area,list:t.list,isDept:t.isDept}),t.calculateHeight();case 8:case"end":return e.stop()}},e,t)}))()},getListKeys:function(){var t=this;this.listKeys=m()(this.list||{}).sort(function(e,i){return t.list[e].sort<t.list[i].sort?1:-1})||[]},picked:function(t){this.$emit("selected",t)},onClickAreaKey:function(t){this.checked=t,this.$refs.scrollRef.scrollTo(0,-(this.offsetTopObj[t]-this.offsetTopFirst))},back:function(){this.$emit("hide")},querySearch:function(t){var e=this;return a()(s.a.mark(function i(){var n,r;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n={isDept:e.isDept,keyword:t,cityName:e.cityName},i.next=3,Object(v.R)(n);case 3:r=i.sent,e.queryResults={},r.forEach(function(t,i){e.$set(e.queryResults,t.areaName,t)});case 6:case"end":return i.stop()}},i,e)}))()}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ship-station-area-list-wrapper"},[i("search-header",{staticClass:"ship-station-area-list-header",attrs:{placeholder:"输入关键字搜索(拼音，首字母均可)"},on:{back:t.back},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),i("div",{staticClass:"ship-station-area-list"},[t.searchValue?[t.queryResultsKeys&&0===t.queryResultsKeys.length?i("div",{staticClass:"no-matched"},[t._v("没有找到匹配的线路")]):i("b-scroll",{staticClass:"ship-station-area-list-item-scroll-wrapper"},[i("ship-station-picker-list",{attrs:{listKeys:t.queryResultsKeys,list:t.queryResults,isDept:t.isDept},on:{picked:t.picked}})],1)]:[i("b-scroll",{staticClass:"ship-station-area-list-keys-scroll-wrapper"},[i("div",{staticClass:"ship-station-area-list-keys-wrapper"},[i("div",{staticClass:"ship-station-area-list-keys title"},[t._v(t._s(t.isDept?"出发港":"目的港"))]),t._v(" "),t._l(t.listKeys,function(e,n){return i("div",{key:n,staticClass:"ship-station-area-list-keys",class:t.checked===e?"checked":"",on:{click:function(i){return t.onClickAreaKey(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])})],2)]),t._v(" "),i("b-scroll",{ref:"scrollRef",staticClass:"ship-station-area-list-item-scroll-wrapper"},[i("ship-station-picker-list",{ref:"pickerList",attrs:{listKeys:t.listKeys,list:t.list,isDept:t.isDept},on:{picked:t.picked}})],1)]],2)],1)},staticRenderFns:[]};var C=i("C7Lr")(g,_,!1,function(t){i("TSIz")},null,null).exports,w={name:"ShipStationFormItem",components:{PopupContainer:p.a,ShipStationPicker:C},props:{startPlaceholder:{type:String,default:"出发港"},endPlaceholder:{type:String,default:"目的港"}},computed:{startStation:function(){return this.$parent.ticketFormData.start},endStation:function(){return this.$parent.ticketFormData.end},startStationId:function(){return this.startStation?this.startStation.id:""},endStationId:function(){return this.endStation?this.endStation.id:""}},data:function(){return{isShow:!1,isDept:1}},methods:{toStationPicker:function(t){this.isDept="start"===t?1:0,this.isShow=!0},picked:function(t){this.isShow=!1,this.$set(this.$parent.ticketFormData,"start",t.fromStation),this.$set(this.$parent.ticketFormData,"end",t.toStation),this.$set(this.$parent.ticketFormData,"url",t.baseUrl)},hide:function(){this.isShow=!1}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ship-station-form-item-wrapper"},[i("span",{staticClass:"ship-station-form-item-picker start"},[i("div",{staticClass:"title"},[t._v("出发港选择")]),t._v(" "),i("div",{on:{click:function(e){return t.toStationPicker("start")}}},[t.startStation?i("p",[t._v(t._s(t.startStation.cname))]):i("p",{staticClass:"placeholder"},[t._v(t._s(t.startPlaceholder))])])]),t._v(" "),"26"===t.startStationId?i("div",{staticClass:"ship-station-form-item-icon"},[i("i",{staticClass:"iconfont icon-jiaohuan"})]):t._e(),t._v(" "),t._m(0),t._v(" "),i("span",{staticClass:"ship-station-form-item-picker end"},[i("div",{staticClass:"title"},[t._v("目的港选择")]),t._v(" "),i("div",{on:{click:function(e){return t.toStationPicker("end")}}},[t.endStation?i("p",[t._v(t._s(t.endStation.cname))]):i("p",{staticClass:"placeholder"},[t._v(t._s(t.endPlaceholder))])])]),t._v(" "),i("popup-container",{attrs:{show:t.isShow,appendToBody:""},on:{"update:show":function(e){t.isShow=e}}},[i("ship-station-picker",{attrs:{isDept:t.isDept},on:{selected:t.picked,hide:t.hide}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ship-station-form-item-icon"},[e("i",{staticClass:"iconfont icon-boat-left-to-right"})])}]};var x=i("C7Lr")(w,$,!1,function(t){i("NLhb")},null,null).exports,D=i("GN/t"),T=i("fUgm"),N=i("kV13"),O={successIcon:"check_circle",infoIcon:"info",warningIcon:"priority_high",errorIcon:"warning",iconSize:24,width:350,maxWidth:"80%",className:"",okLabel:"确定",cancelLabel:"取消",transition:"scale"},L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},K={name:"mu-modal",props:{title:String,icon:String,iconSize:Number,mode:{type:String,default:"alert",validator:function(t){return-1!==["alert","confirm","prompt"].indexOf(t)}},type:{type:String,default:"",validator:function(t){return-1!==["","success","info","warning","error"].indexOf(t)}},content:[String,Function],width:[Number,String],maxWidth:[Number,String],className:String,transition:String,beforeClose:Function,okLabel:String,cancelLabel:String,inputType:String,inputPlaceholder:String,inputValue:[String,Number],validator:Function},data:function(){return{open:!1,value:this.inputValue,errorText:""}},methods:{handleClose:function(t){var e=this;return this.beforeClose?this.beforeClose(t,this,function(){return e.close(t)}):this.close(t)},close:function(t){if(t&&"prompt"===this.mode&&this.validator){var e=this.validator(this.value);if(!e.valid)return void(this.errorText=e.message);this.errorText=""}return this.open=!1,this.$emit("close",t,this.value),t},createInput:function(t){var e=this;if("prompt"===this.mode)return t("mu-text-field",{attrs:{type:this.inputType,placeholder:this.inputPlaceholder},props:{value:this.value,errorText:this.errorText,fullWidth:!0},on:{input:function(t){return e.value=t},keydown:function(t){13===t.keyCode&&e.handleClose(!0)}}})},createContent:function(t){var e="function"==typeof this.content?this.content(t):this.content;return t("div",{class:"mu-modal-content"},[this.icon?t("mu-icon",{staticClass:"mu-modal-icon",props:{value:this.icon,color:this.type,size:this.iconSize}}):void 0,t("div",{staticClass:"mu-modal-inner"},[e,this.createInput(t)])])},createActions:function(t){var e=this,i=[];return i.push(t("mu-button",{props:{flat:!0,color:"primary"},slot:"actions",on:{click:function(){return e.handleClose(!0)}}},this.okLabel)),"alert"!==this.mode&&i.unshift(t("mu-button",{props:{flat:!0},slot:"actions",on:{click:function(){return e.handleClose(!1)}}},this.cancelLabel)),i}},render:function(t){return t("mu-dialog",{props:{open:this.open,title:this.title,width:this.width,maxWidth:this.maxWidth,dialogClass:this.className,transition:this.transition,overlayClose:!1,escPressClose:!1}},[this.createContent(t)].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(this.createActions(t))))}},R=N.default.extend(K),F="undefined"==typeof window,P=[],j=function(t){if(!F)return new Promise(function(e){var i=new R({el:document.createElement("div"),propsData:I({},O,{icon:O[t.type+"Icon"]||""},t)});document.body.appendChild(i.$el),i.open=!0,"prompt"===i.mode&&setTimeout(function(){i.$el&&i.$el.querySelector("input").focus()},200),P.push(i),i.$on("close",function(t,n){setTimeout(function(){i.$el&&i.$el.parentNode&&i.$el.parentNode.removeChild(i.$el),i.$destroy(),i=null},500);var s=P.indexOf(i);return-1!==s&&P.splice(s,1),e({result:t,value:n})})})};j.config=function(t){if(!t||Array.isArray(t)||"object"!==(void 0===t?"undefined":L(t)))return O;for(var e in t)t.hasOwnProperty(e)&&(O[e]=t[e]);return O},j.close=function(){P.forEach(function(t){t.close(!1)})},["alert","confirm","prompt"].forEach(function(t){j[t]=function(e,i){if(e||!(arguments.length<2)){var n="";switch(arguments.length){case 1:i={};break;case 2:"string"==typeof i&&(n=i,i={});break;default:n=arguments[1],i=arguments[2]}return j(I({title:n,content:e},i,{mode:t}))}}}),j.install=function(t,e){j.config(e),t.prototype.$message=j,t.prototype.$alert=j.alert,t.prototype.$confirm=j.confirm,t.prototype.$prompt=j.prompt};var E=j,q={components:{IndexNavWrapper:l.a,TicketForm:u.a,ShipStationFormItem:x,TravelLineSection:D.a},props:{area:String},computed:c()({},Object(T.b)(["wxUserInfo"])),data:function(){return{imgSrc:{zs:"static/images/ship-nav-1.jpg",nb:"static/images/ship-nav-2.jpg"},href:"",noticeMessages:[]}},mounted:function(){this.getNoticeMessages()},methods:{commit:function(t){var e=this;E.alert('根据疫情智控工作要求，客运码头须出示"舟山健康码(绿码)"或"绿色通行证(绿证)"方能通行。舟山健康码红码或黄码旅客，以及既未申领"舟山健康码"也未申领“绿证"的旅客，请勿在网上购票。',"特别提示").then(function(){e.href=t.url+"?sCity="+t.start.alias+"&eCity="+t.end.alias+"&date="+t.dateTime+"&unionid="+(e.wxUserInfo.unionid||""),e.$loading("正在跳转..."),window.location.href=e.href,setTimeout(function(){e.$loading.close()},1e3),e.$router.push({name:"ShipTicketIframe",params:{system:"query",url:e.href}})})},toBoatDynamics:function(){this.$router.push({path:this.area+"/dynamics"})},toZsMeteor:function(){this.$router.push({name:"ShipTicketWeather"})},toHome:function(){},getNoticeMessages:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.y)({type:"ship"});case 2:t.noticeMessages=e.sent;case 3:case"end":return e.stop()}},e,t)}))()}}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main-page",{staticClass:"ship-ticket-index-container",attrs:{noHeader:""}},[i("template",{slot:"scroll"},[i("l-header-image",{attrs:{imgSrc:t.imgSrc[t.area],back:"",telephone:"0580-2626888"}}),t._v(" "),i("dynamic-notice-bar",{attrs:{type:"ship"}}),t._v(" "),i("ticket-form",{attrs:{type:"ship-"+this.area,canWebBuyDays:3},on:{commit:t.commit}},[i("ship-station-form-item",{attrs:{slot:"city"},slot:"city"}),t._v(" "),i("template",{slot:"bottom-btn"},[i("icon-btn",{attrs:{type:"shipOrder"}}),t._v(" "),i("icon-btn",{attrs:{icon:"home-ship",color:"#E8997F",text:"船班动态"},nativeOn:{click:function(e){return t.toBoatDynamics(e)}}}),t._v(" "),i("icon-btn",{attrs:{icon:"meteor",color:"#65DDD3",text:"舟山气象"},nativeOn:{click:function(e){return t.toZsMeteor(e)}}}),t._v(" "),i("icon-btn",{attrs:{type:"feedback",options:{category:"ship"}}})],1)],2)],1)],2)},staticRenderFns:[]};var M=i("C7Lr")(q,A,!1,function(t){i("uoBD")},null,null);e.default=M.exports},Mlnl:function(t,e){},NLhb:function(t,e){},SSy3:function(t,e,i){var n=i("WXuS"),s=i("RY2v");i("adHB")("keys",function(){return function(t){return s(n(t))}})},TSIz:function(t,e){},ZLEe:function(t,e,i){t.exports={default:i("0k87"),__esModule:!0}},uoBD:function(t,e){}});