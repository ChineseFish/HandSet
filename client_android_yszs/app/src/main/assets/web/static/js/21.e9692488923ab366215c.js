webpackJsonp([21],{LIVj:function(t,e){},ZzIn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("HzJ8"),a=i.n(n),s=i("4YfN"),o=i.n(s),r=i("lC5x"),c=i.n(r),l=i("J0Oq"),u=i.n(l),p=i("gyMJ"),d=i("fctu"),f={props:{info:{type:Array,default:function(){return[]}},trainNumber:String},data:function(){return{}},methods:{hide:function(){this.$emit("hide")}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main-page",{staticClass:"stop-info-container",attrs:{noHeader:""}},[i("l-header",{attrs:{title:t.trainNumber+"经停信息"}},[i("div",{attrs:{slot:"left"},slot:"left"},[i("i",{staticClass:"iconfont icon-back",on:{click:t.hide}})])]),t._v(" "),i("section",{staticClass:"stop-info-container-labels"},[i("span",[t._v("车站名称")]),t._v(" "),i("span",[t._v("到达")]),t._v(" "),i("span",[t._v("出发")]),t._v(" "),i("span",[t._v("停留")])]),t._v(" "),i("section",{attrs:{slot:"scroll"},slot:"scroll"},t._l(t.info,function(e,n){return i("div",{key:n,staticClass:"stop-info-container-items"},[i("span",{staticClass:"station-name"},[i("span",[t._v(t._s(e.stationName))])]),t._v(" "),i("span",[t._v(t._s(0===n?"----":e.arrivalTime))]),t._v(" "),i("span",[t._v(t._s(n===t.info.length-1?"----":e.setOffTime))]),t._v(" "),i("span",[t._v(t._s("0"===e.stationStayTime?"----":e.stationStayTime+"分钟"))])])}),0)],1)},staticRenderFns:[]};var v=i("C7Lr")(f,h,!1,function(t){i("LIVj")},null,null).exports,_={components:{PopupContainer:d.a,StopInfoContainer:v},props:{info:{type:Object,default:function(){}}},data:function(){return{showStopInfo:!1,stopInfo:[]}},methods:{toShowStopInfo:function(){var t=this;return u()(c.a.mark(function e(){var i,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={trainNumber:t.info.trainNumber,date:t.info.queryDate},e.next=3,Object(p.V)(i);case 3:n=e.sent,t.stopInfo=n,t.showStopInfo=!0;case 6:case"end":return e.stop()}},e,t)}))()},toHideStopInfo:function(){this.showStopInfo=!1},toShowBookNotice:function(){this.$store.dispatch("showBookTicketNotice","train")}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"train-ticket-header"},[i("section",{staticClass:"train-ticket-header-top"},[i("section",{staticClass:"train-ticket-header-left"},[i("div",{staticClass:"station-name"},[t._v(t._s(t.info.fromStationName))]),t._v(" "),i("div",{staticClass:"time"},[t._v(t._s(t.info.fromTime))])]),t._v(" "),i("section",{staticClass:"train-ticket-header-center"},[i("div",{staticClass:"cost-time"},[i("span",[t._v(t._s(t.info.costTime))])]),t._v(" "),i("div",{staticClass:"stop-info",on:{click:t.toShowStopInfo}},[i("span",[t._v("经停信息")])]),t._v(" "),i("span",{staticClass:"query-date"},[t._v(t._s(t._f("dateFormat")(t.info.queryDate)))])]),t._v(" "),i("section",{staticClass:"train-ticket-header-right"},[i("div",{staticClass:"station-name"},[t._v(t._s(t.info.toStationName))]),t._v(" "),i("div",{staticClass:"time"},[t._v(t._s(t.info.toTime))])])]),t._v(" "),i("section",{staticClass:"train-ticket-header-bottom"},[i("div",[i("span",[t._v(t._s(t.info.trainNumber))]),t._v(" "),i("span",[t._v("\n        "+t._s(t.info.ticketType)+"\n        "),i("span",{staticClass:"price"},[t._v("￥"),i("span",{staticClass:"price-num"},[t._v(t._s(t.info.price))])])])]),t._v(" "),i("div",{staticClass:"notice",on:{click:t.toShowBookNotice}},[t._v("订票须知")])]),t._v(" "),i("popup-container",{attrs:{show:t.showStopInfo},on:{"update:show":function(e){t.showStopInfo=e}}},[t.showStopInfo?i("stop-info-container",{attrs:{info:t.stopInfo,trainNumber:t.info.trainNumber},on:{hide:t.toHideStopInfo}}):t._e()],1)],1)},staticRenderFns:[]};var k=i("C7Lr")(_,m,!1,function(t){i("zhxS")},null,null).exports,C=i("5zGp"),g=i("4TJr"),y=i("iLhm"),b=i("cDNr"),T=i("Of67"),D=i("fUgm"),S=i("tyej"),w={components:{TrainTicketInfo:k,TicketPassengerForm:C.a,TicketCollector:g.a,TopayBar:y.a,Insurance:b.a,OrderPriceDetail:T.a},mixins:[S.a],computed:o()({},Object(D.b)(["passengerFields","passengerValues","collector"]),{priceDetailList:function(){var t=[];if(t.push({name:"票价",price:this.detailData.price,count:this.passengerValues.length}),this.detailData.handlingFee&&t.push({name:"代订服务费",price:this.detailData.handlingFee,count:this.passengerValues.length}),this.insurance&&0!==this.insurance.length){var e=!0,i=!1,n=void 0;try{for(var s,o=a()(this.insurance);!(e=(s=o.next()).done);e=!0){var r=s.value;t.push({name:r.name,price:r.price,count:this.passengerValues.length})}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}}return t},priceTotal:function(){var t=0,e=!0,i=!1,n=void 0;try{for(var s,o=a()(this.priceDetailList);!(e=(s=o.next()).done);e=!0){var r=s.value;t+=r.price*r.count}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}return t},orderInfoObj:function(){return o()({},this.detailData,{insurance:this.insurance})},detailData:function(){return this.$store.getters.detailData.train}}),data:function(){return{insuranceList:[{id:"21",type:3,name:"5元意外险",price:"5",introduce:"",checked:!0},{id:"22",type:3,name:"10元意外险",price:"10",introduce:""},{id:"23",type:3,name:"极速出票套餐（含意外险）",price:"20",introduce:""}],insurance:[]}},created:function(){this.$store.commit("GET_COLLECTOR"),this.$store.commit("GET_PASSENGERS",{type:"train"}),this.insurance=this.insuranceList.filter(function(t){return t.checked})},mounted:function(){this.detailData&&this.detailData.queryDate||this.$store.commit("GET_DETAILDATA",{type:"train"}),this.detailData.insurance=this.insurance,this.detailData.passengers=this.passengerValues,this.detailData.collector=this.collector,this.detailData.handlingFee=this.detailData.handlingFee,this.insurance=this.insuranceList.filter(function(t){return t.checked})},methods:{toShowBookNotice:function(){this.$store.dispatch("showBookTicketNotice","train")}}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main-page",{staticClass:"train-detail-container",attrs:{back:"",title:"订单详情"}},[t.isLogin?t._e():i("div",{attrs:{slot:"header-right"},on:{click:t.toLoginView},slot:"header-right"},[t._v("登录")]),t._v(" "),i("train-ticket-info",{staticClass:"train-detail-ticket-info",attrs:{info:t.detailData}}),t._v(" "),i("template",{slot:"scroll"},[i("ticket-passenger-form",{staticClass:"block-section passenger",attrs:{fields:t.passengerFields,values:t.passengerValues,addText:"乘客",type:"train",limit:t.detailData.orderTicketCount<t.detailData.surplusTicket?t.detailData.orderTicketCount:t.detailData.surplusTicket}}),t._v(" "),i("ticket-collector",{staticClass:"block-section",model:{value:t.collector,callback:function(e){t.collector=e},expression:"collector"}}),t._v(" "),i("insurance",{staticClass:"block-section",attrs:{list:t.insuranceList},on:{change:function(e){t.insurance=arguments[0]}}}),t._v(" "),i("order-price-detail",{staticClass:"train-detail-order-price",attrs:{list:t.priceDetailList}},[i("div",{staticClass:"protocol"},[i("p",[t._v("订单包含票费、附加选购产品、服务费，点击去支付表示已阅读并同意"),i("a",{staticClass:"protocol-link",on:{click:t.toShowBookNotice}},[t._v("预订协议")])])])])],1),t._v(" "),i("topay-bar",{staticClass:"train-detail-topay-bar",attrs:{slot:"bottom",orderObj:t.orderInfoObj,type:"train"},slot:"bottom",model:{value:t.priceTotal,callback:function(e){t.priceTotal=e},expression:"priceTotal"}})],2)},staticRenderFns:[]};var N=i("C7Lr")(w,I,!1,function(t){i("sbs7")},null,null);e.default=N.exports},sbs7:function(t,e){},zhxS:function(t,e){}});