webpackJsonp([43],{f9NG:function(t,e){},feJs:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("lC5x"),a=i.n(s),r=i("J0Oq"),n=i.n(r),o=i("aA9S"),c=i.n(o),l=i("4YfN"),d=i.n(l),u=i("N3LN"),m=i("fT87"),p=i("wBUC"),v=i("gyMJ"),f=i("fUgm"),_={components:{DatepickBar:u.a,MainPage:m.a,ListSortBar:p.a,ListSortBarItem:p.b},props:{from:String,to:String,time:String,category:[Number,String]},computed:d()({},Object(f.b)(["queryHistory","queryDate","canWebBuyDays"]),{lastHistory:function(){return this.queryHistory.plane.slice(-1)[0]},fromStationCode:function(){return this.from||this.lastHistory&&this.lastHistory.start.code},toStationCode:function(){return this.to||this.lastHistory&&this.lastHistory.end.code},planeCategory:function(){return 2===parseInt(this.category)?"foreign-plane":"internal-plane"}}),data:function(){return{list:[],scrollHeight:0,dateTime:this.time,isLoaded:!1,priceTexts:["按价格排序","价格从低到高","价格从高到低"],timeTexts:["按时间排序","时间从早到晚","时间从晚到早"],sortSelected:0}},mounted:function(){this.dateTime=this.time||this.queryDate,this.getList()},methods:{toDetail:function(t){var e=c()({},t,{category:this.planeCategory,fromCode:this.fromStationCode,toCode:this.toStationCode,date:this.dateTime});this.$store.commit("SET_DETAILDATA",{type:"plane",value:e}),this.$router.push({name:"PlaneTicketDetail"})},getList:function(){var t=this;return n()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={sCityCode:t.from,eCityCode:t.to,date:t.dateTime,category:t.category},t.isLoaded=!1,e.next=4,Object(v.C)(i);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:t.list=e.t0,t.list&&(t.list=t.list.filter(function(t){return"10折"===t.discount&&(t.discount="全价"),!(t.size>1)&&t})),t.isLoaded=!0;case 10:case"end":return e.stop()}},e,t)}))()},touchSort:function(){this.$refs["main-page"].scrollToTop(0)}},watch:{dateTime:function(){this.getList()}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main-page",{ref:"main-page",staticClass:"plane-ticket-list-container",attrs:{back:"",isLoading:!t.isLoaded,data:t.list}},[i("div",{staticClass:"l-header-title",attrs:{slot:"header-center"},slot:"header-center"},[t._v("\n    机票列表\n  ")]),t._v(" "),i("datepick-bar",{attrs:{canWebBuyDays:t.canWebBuyDays},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}}),t._v(" "),i("section",{staticClass:"plane-ticket-list-wrapper",attrs:{slot:"scroll"},slot:"scroll"},t._l(t.list,function(e,s){return i("div",{directives:[{name:"is-link",rawName:"v-is-link"}],key:s,staticClass:"plane-ticket-list-item",on:{click:function(i){return t.toDetail(e)}}},[i("div",{staticClass:"plane-ticket-list-item-content"},[i("div",{staticClass:"place"},[i("div",{staticClass:"datetime"},[t._v(t._s(t._f("timeFormat")(e.startTime)))]),t._v(" "),i("div",{staticClass:"airport"},[t._v(t._s(e.startAirport))])]),t._v(" "),i("div",{staticClass:"icon-arrow"},[i("i",{staticClass:"city-to"})]),t._v(" "),i("div",{staticClass:"place"},[i("div",{staticClass:"datetime"},[t._v(t._s(t._f("timeFormat")(e.endTime)))]),t._v(" "),i("div",{staticClass:"airport"},[t._v(t._s(e.endAirport))])]),t._v(" "),i("div",{staticClass:"price-wrapper"},[i("div",{staticClass:"price"},[i("span",{staticClass:"price-symbol"},[t._v("￥")]),i("span",[t._v(t._s(e.nowPrice))])]),t._v(" "),i("div",{staticClass:"tips"},[t._v(t._s(e.discount))])])]),t._v(" "),i("div",{staticClass:"plane-ticket-list-item-company"},[i("span",[t._v(t._s(e.airCorp)+" "+t._s(e.flightNo))])])])}),0),t._v(" "),i("list-sort-bar",{attrs:{slot:"bottom",list:t.list},slot:"bottom",model:{value:t.sortSelected,callback:function(e){t.sortSelected=e},expression:"sortSelected"}},[i("list-sort-bar-item",{attrs:{sortKey:"startTime",sortTexts:t.timeTexts,icon:"time-xianxing"},nativeOn:{click:function(e){return t.touchSort(e)}}}),t._v(" "),i("list-sort-bar-item",{attrs:{sortKey:"nowPrice",sortTexts:t.priceTexts,icon:"caiwu-xianxing"},nativeOn:{click:function(e){return t.touchSort(e)}}})],1)],1)},staticRenderFns:[]};var y=i("C7Lr")(_,h,!1,function(t){i("f9NG")},null,null);e.default=y.exports}});