webpackJsonp([31],{"8ixr":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("lC5x"),s=e.n(i),r=e("J0Oq"),c=e.n(r),o=e("HzJ8"),n=e.n(o),l=e("4YfN"),d=e.n(l),p=e("5zGp"),u=e("l/dB"),v=e("fT87"),_=e("4TJr"),m=e("gyMJ"),h=e("nUeE"),D=e.n(h),C=e("fUgm"),f=e("tyej"),g=e("iLhm"),k=e("cDNr"),y=e("Of67"),T={components:{TicketPassengerForm:p.a,LCheckbox:u.a,MainPage:v.a,TicketCollector:_.a,TopayBar:g.a,Insurance:k.a,OrderPriceDetail:y.a},mixins:[f.a],computed:d()({},Object(C.b)(["passengerFields","passengerValues","collector"]),{totalPrice:function(){var t=this.detailData.nowPrice,a=this.detailData.airportPrice,e=this.passengerValues.length;return(t+a+this.insurancePrice)*e},insurancePrice:function(){var t=0,a=!0,e=!1,i=void 0;try{for(var s,r=n()(this.insurance);!(a=(s=r.next()).done);a=!0){var c=s.value;t+=c.checked?parseInt(c.price):0}}catch(t){e=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(e)throw i}}return t},detailData:function(){return this.$store.getters.detailData.plane||{}},orderObj:function(){return{startCity:this.detailData.startCityCHN,endCity:this.detailData.endCityCHN,startAirport:this.detailData.startAirport,endAirport:this.detailData.endAirport,startTime:this.detailData.startTime,endTime:this.detailData.endTime,flightNo:this.detailData.flightNo,price:this.detailData.nowPrice,airportPrice:this.detailData.airportPrice,passengers:this.passengerValues,collector:this.collector,insurancePrice:this.insurancePrice,discount:this.detailData.discount,category:this.detailData.category,fromCode:this.detailData.fromCode,toCode:this.detailData.toCode}}}),data:function(){return{ticketDialog:!1,priceDetail:!1,insuranceList:[{id:"11",type:2,name:"20元航空意外险",price:"20",msg:"保险注意事项",checked:!0,introduce:""}],msgDialog:!1,message:"",insurance:[]}},created:function(){this.$store.commit("GET_COLLECTOR"),this.$store.commit("GET_PASSENGERS",{type:"plane"}),this.insurance=this.insuranceList.filter(function(t){return t.checked})},mounted:function(){this.detailData&&this.detailData.queryDate||this.$store.commit("GET_DETAILDATA",{type:"plane"})},methods:{showTicket:function(){this.ticketDialog=!0},hideTicket:function(){this.ticketDialog=!1},hideMsg:function(){this.msgDialog=!1},openPriceDetail:function(){this.priceDetail=!0},closePriceDetail:function(){this.priceDetail=!1},submit:function(){var t=this;return c()(s.a.mark(function a(){var e,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e={startCity:t.detailData.startCityCHN,endCity:t.detailData.endCityCHN,startAirport:t.detailData.startAirport,endAirport:t.detailData.endAirport,startTime:t.detailData.startTime,endTime:t.detailData.endTime,flightNo:t.detailData.flightNo,handlingFee:t.detailData.handlingFee,price:t.detailData.nowPrice,airportPrice:t.detailData.airportPrice,passengers:t.passengerValues,collector:t.collector,insurancePrice:t.insurancePrice,discount:t.detailData.discount,category:t.detailData.category,fromCode:t.detailData.fromCode,toCode:t.detailData.toCode},t.$store.commit("SET_COLLECTOR",{type:"plane",value:t.collector}),t.$store.commit("SET_PASSENGERS",{type:"plane",value:t.passengerValues}),a.next=5,Object(m._1)(e);case 5:i=a.sent,t.$router.push({name:"PlaneTicketPayment",query:{orderNo:i.orderNo}});case 7:case"end":return a.stop()}},a,t)}))()},getDetail:function(){return this.detail?this.detail:D.a.get("PLANE_DETAIL")},insuranceChange:function(t){t.checked=!t.checked},toShowBookNotice:function(){this.$store.dispatch("showBookTicketNotice","plane")}}},P={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main-page",{staticClass:"plane-ticket-detail-container",attrs:{back:""}},[e("div",{staticClass:"l-header-title",attrs:{slot:"header-center"},slot:"header-center"},[e("span",[t._v(t._s(t.detailData.startCityCHN))]),t._v(" "),e("i",{staticClass:"iconfont icon-city-to"}),t._v(" "),e("span",[t._v(t._s(t.detailData.endCityCHN))])]),t._v(" "),t.isLogin?t._e():e("div",{attrs:{slot:"header-right"},on:{click:t.toLoginView},slot:"header-right"},[t._v("登录")]),t._v(" "),e("template",{slot:"scroll"},[e("section",{staticClass:"plane-ticket-detail-top block-section"},[e("div",{directives:[{name:"is-link",rawName:"v-is-link"}],staticClass:"top-info",on:{click:t.showTicket}},[e("span",[t._v(t._s(t._f("dateFormat")(t.detailData.startTime)))]),t._v(" "),e("span",[t._v(t._s(t._f("weekdayFormat")(t.detailData.startTime)))]),t._v(" "),e("span",[t._v(t._s(t._f("timeFormat")(t.detailData.startTime)))]),t._v(" "),e("span",[t._v(t._s(t.detailData.startAirport+"-"+t.detailData.endAirport))])]),t._v(" "),e("div",{staticClass:"ticket-info"},[e("div",{staticClass:"ticket-price"},[e("div",{staticClass:"ticket-price-number price"},[e("span",{staticClass:"price-symbol"},[t._v("￥")]),t._v(t._s(t.detailData.nowPrice)+"\n          ")]),t._v(" "),e("div",{staticClass:"ticket-cabin"},[t._v("经济舱")])]),t._v(" "),e("div",{staticClass:"ticket-desc"},[e("div",{staticClass:"detail"},[t._v("机建+燃油 ￥"+t._s(t.detailData.airportPrice))]),t._v(" "),e("div",{staticClass:"tips"},[e("i",{staticClass:"iconfont icon-time-xianxing"}),t._v(" "),e("span",[t._v("支付成功后1小时内出票")])])])])]),t._v(" "),e("section",{staticClass:"plane-ticket-detail-passenger block-section"},[e("ticket-passenger-form",{attrs:{fields:t.passengerFields,values:t.passengerValues,type:"plane",addText:"乘机人"}})],1),t._v(" "),e("ticket-collector",{staticClass:"block-section",model:{value:t.collector,callback:function(a){t.collector=a},expression:"collector"}}),t._v(" "),e("insurance",{staticClass:"block-section",attrs:{list:t.insuranceList},on:{change:function(a){t.insurance=arguments[0]}}}),t._v(" "),e("order-price-detail",{staticClass:"plane-ticket-detail-order-price",attrs:{list:t.priceDetailList}},[e("div",{staticClass:"protocol"},[e("p",[t._v("订单包含票费、附加选购产品、服务费，点击去支付表示已阅读并同意"),e("a",{staticClass:"protocol-link",on:{click:t.toShowBookNotice}},[t._v("预订协议")])])])])],1),t._v(" "),e("topay-bar",{attrs:{slot:"bottom",orderObj:t.orderObj,type:"plane"},slot:"bottom",model:{value:t.totalPrice,callback:function(a){t.totalPrice=a},expression:"totalPrice"}}),t._v(" "),e("l-dialog",{staticClass:"ticket-msg-dialog",attrs:{show:t.msgDialog},on:{"update:show":function(a){t.msgDialog=a}}},[e("p",{staticClass:"msg-content"},[t._v(t._s(t.message))])]),t._v(" "),e("l-dialog",{staticClass:"ticket-info-dialog",attrs:{show:t.ticketDialog},on:{"update:show":function(a){t.ticketDialog=a}}},[e("div",{staticClass:"ticket-title"},[e("span",[t._v(t._s(t._f("dateFormat")(t.detailData.startTime)))]),t._v(" "),e("span",[t._v(t._s(t._f("weekdayFormat")(t.detailData.startTime)))]),t._v(" "),e("span",[t._v(t._s(t.detailData.startCityCHN+" - "+t.detailData.endCityCHN))])]),t._v(" "),e("div",{staticClass:"ticket-info"},[e("div",{staticClass:"place"},[e("div",{staticClass:"datetime"},[t._v(t._s(t._f("timeFormat")(t.detailData.startTime)))]),t._v(" "),e("div",{staticClass:"airport"},[t._v(t._s(t.detailData.startAirport))])]),t._v(" "),e("div",{staticClass:"icon-arrow"},[e("span",{staticClass:"ticket-during-time"},[t._v(t._s(t._f("duringTimeFormat")(t.detailData.endTime-t.detailData.startTime)))]),t._v(" "),e("i",{staticClass:"city-to"})]),t._v(" "),e("div",{staticClass:"place"},[e("div",{staticClass:"datetime"},[t._v(t._s(t._f("timeFormat")(t.detailData.endTime)))]),t._v(" "),e("div",{staticClass:"airport"},[t._v(t._s(t.detailData.endAirport))])])])])],2)},staticRenderFns:[]};var b=e("C7Lr")(T,P,!1,function(t){e("U0YX")},null,null);a.default=b.exports},U0YX:function(t,a){}});